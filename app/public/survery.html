<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Survey</title>
    <!--Bootstrap CDN-->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />

    <script
    src="https://code.jquery.com/jquery-3.4.1.min.js"
    integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
    crossorigin="anonymous"></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
      integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
      integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
      crossorigin="anonymous"
    ></script>

    <!--custom css link-->
    <link rel="stylesheet" href="./CSS/surveryStyles.css" />
    ></script>
  </head>
  <body>
    <div class="container" id="backgroundColor">
      <h1>Survey Questions</h1>

      <h3>About You</h3>

      <!--start forms-->
      <form>
        <!--name input-->
        <div class="form-group">
          <label for="nameInput">Name (Required)</label>
          <input
            type="text"
            class="form-control"
            id="nameInput"
            placeholder="Name"
          />
        </div>

        <!--photo input-->
        <div class="form-group">
          <label for="photoInput">Link to Photo Image (Required)</label>
          <input
            type="url"
            class="form-control"
            id="photoInput"
            placeholder="Photo Link"
          />
        </div>

        <!--Question1-->
        <div class="form-group">
          <label for="question1">Question 1</label>
          <h4>Your idea of adventure is staying home and watching TV</h4>
          <select class="form-control" id="question1">
            <option selected>Choose...</option>
            <option>1 (Strongly Disagree</option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5 (Strongly Agree)</option>
          </select>
        </div>

        <!--Question2-->
        <div class="form-group">
          <label for="question2">Question 2</label>
          <h4>You like trying new things as often as possible</h4>
          <select class="form-control" id="question2">
            <option selected>Choose...</option>
            <option>1 (Strongly Disagree</option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5 (Strongly Agree)</option>
          </select>
        </div>

        <!--Question 3-->
        <div class="form-group">
          <label for="question3">Question 3</label>
          <h4>The majority of free money is saved for travel</h4>
          <select class="form-control" id="question3">
            <option selected>Choose...</option>
            <option>1 (Strongly Disagree</option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5 (Strongly Agree)</option>
          </select>
        </div>

        <!--Question 4-->
        <div class="form-group">
          <label for="question4">Question 4</label>
          <h4>The majority of free money is used for cool things</h4>
          <select class="form-control" id="question4">
            <option selected>Choose...</option>
            <option>1 (Strongly Disagree</option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5 (Strongly Agree)</option>
          </select>
        </div>

        <!--Question 5-->
        <div class="form-group">
          <label for="question5">Question 5</label>
          <h4>You spend time volunteering when you can</h4>
          <select class="form-control" id="question5">
            <option selected>Choose...</option>
            <option>1 (Strongly Disagree</option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5 (Strongly Agree)</option>
          </select>
        </div>

        <!--Question 6-->
        <div class="form-group">
          <label for="question6">Question 6</label>
          <h4>You enjoy spending a lot of time outdoors</h4>
          <select class="form-control" id="question6">
            <option selected>Choose...</option>
            <option>1 (Strongly Disagree</option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5 (Strongly Agree)</option>
          </select>
        </div>

        <!--Question 7-->
        <div class="form-group">
          <label for="question7">Question 7</label>
          <h4>You enjoy learning new things and about things</h4>
          <select class="form-control" id="question7">
            <option selected>Choose...</option>
            <option>1 (Strongly Disagree</option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5 (Strongly Agree)</option>
          </select>
        </div>

        <!--Question 8-->
        <div class="form-group">
          <label for="question8">Question 8</label>
          <h4>You learn by doing</h4>
          <select class="form-control" id="question8">
            <option selected>Choose...</option>
            <option>1 (Strongly Disagree</option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5 (Strongly Agree)</option>
          </select>
        </div>

        <!--Question 9-->
        <div class="form-group">
          <label for="question9">Question 9</label>
          <h4>You listen to music on a regular basis</h4>
          <select class="form-control" id="question9">
            <option selected>Choose...</option>
            <option>1 (Strongly Disagree</option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5 (Strongly Agree)</option>
          </select>
        </div>

        <!--Question 10-->
        <div class="form-group">
          <label for="question10">Question 10</label>
          <h4>Always on the hunt for new good music</h4>
          <select class="form-control" id="question10">
            <option selected>Choose...</option>
            <option>1 (Strongly Disagree</option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5 (Strongly Agree)</option>
          </select>
        </div>

        <!--submit-->
        <button
          type="button"
          id="submitButton"
          class="btn btn-primary btn-lg btn-block"
        >
          Submit
        </button>
      </form>
      <h3 id="fillOutForms" class="text-danger text-center pt-3 pb-4"></h3>
      <!--End form-->
    </div>

    <!-- Modal -->
    <div
      class="modal fade"
      id="newFriendModal"
      tabindex="-1"
      role="dialog"
      aria-labelledby="exampleModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="newFriendTitle"></h5>
            <button
              type="button"
              class="close"
              data-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body" id='newFriendBody'>
            
          </div>
        </div>
      </div>
    </div>

    <script>
      //checks to see if all inputs have user input
      var validateForm = function() {
        var isValid = true;

        $(".form-control").each(function(item) {
          if ($(this).val() === "" || $(this).val() === "Choose...") {
            isValid = false;
            return isValid;
          }
        });

        return isValid;
      };

      //returns an object of all the inputs in an object
      var getAllInputs = function() {
        var input = {
          name: $("#nameInput").val(),
          photo: $("#photoInput").val(),
          scores: []
        };

        for (var i = 1; i < 11; i++) {
          input.scores.push(Number($(`#question${i}`).val()[0]));
        }

        return input;
      };

      //checks forms and submits
      $("#submitButton").on("click", function() {
        if (validateForm()) {
          console.log(getAllInputs());
          $.post("/api/friends", getAllInputs(), function(data) {
            console.log(data);
            $('#newFriendTitle').text('New Friend');
            $('#newFriendBody').text(`Your new Friend is ${data.name}`);
            $('#newFriendModal').modal();
          });
        } else {
          $("#fillOutForms").text("Please fill out entire form");
          console.log("All forms not filled");
        }
      });
    </script>
  </body>
</html>
